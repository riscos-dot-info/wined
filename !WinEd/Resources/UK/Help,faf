<html><head>
<title>Mimeman</title>
<meta name="description" content="WinEd is a template editor for RISC OS.">
<link rel="stylesheet" type="text/css" href="../Styles">
</head>
<body bgcolor="#FFFFFF" text="#000000" link="#0000CC" alink="#99AFFF" vlink="#3333FF">
<h1>WinEd</h1>
<h1><font size="-1">A template editor for RISC OS</font></h1>

<a name="contents"><h2>Contents</h2></a>
<p>
<ol>
<li><a href="#about">About WinEd</a>
<li><a href="#requirements">Requirements</a>
<li><a href="#conditions">License</a>
<li><a href="#install">Installation</a>
<li><a href="#disclaimer">Disclaimer</a>
<li><a href="#units">Units used</a>
<li><a href="#mode">Mode independence</a>
<li><a href="#dialogue">WinEd's dialogue boxes</a>
<li><a href="#error">Error handling</a>
<li><a href="#help">Interactive help</a>
<li><a href="#loading">Loading and creating templates</a>
<li><a href="#keyboard">Keyboard control of the pointer</a>
<li><a href="#sprite">Sprite files and sprite areas</a>
<li><a href="#iconbar">The icon bar menu</a>
<li><a href="#choices">The Choices dialogue box</a>
<li><a href="#browsers">Browsers</a>
<li><a href="#mouse">Mouse operations in browsers</a>
<li><a href="#browsermenu">The browser menu</a>
<li><a href="#save">Saving templates</a>
<li><a href="#stats">Statistics windows</a>
<li><a href="#browsertool">The browser tool bar</a>
<li><a href="#export">Exporting icon names</a>
<li><a href="#preview">Preview windows</a>
<li><a href="#previewmenu">The preview menu</a>
<li><a href="#edit">Editable windows</a>
<li><a href="#mouseedit">Mouse operations in editable windows</a>
<li><a href="#select">Selected icon(s) submenu</a>
<li><a href="#edittool">The editable window tool bar</a>
<li><a href="#editwindow">Edit window dialogue box</a>
<li><a href="#monitor">The monitor</a>
<li><a href="#creatingicons">Creating icons: the Icon picker</a>
<li><a href="#workarea">Work area dialogue box</a>
<li><a href="#visiblearea">Visible area dialogue box</a>
<li><a href="#editicon">Edit icon/title dialogue box</a>
<li><a href="#editicons">Edit multiple icons dialogue box</a>
<li><a href="#align">Align dialogue box</a>
<li><a href="#space">Space out dialogue box</a>
<li><a href="#resize">Resize icons dialogue box</a>
<li><a href="#coords">Coordinates dialogue box</a>
<li><a href="#frame">Frame dialogue box</a>
<li><a href="#hints">Hints &amp; tips</a>
<li><a href="#custom">Customising WinEd</a>
<li><a href="#bug">Bug reports &amp; suggestions</a>
<li><a href="#acknowledgements">Acknowledgements</a>
</ol>
</p>
<p><a href="#contents">Return to contents</a></p>

<a name="about"><h2>1. About WinEd</h2></a>
<p><em>WinEd</em> is a template editor. Its most attractive features are:
<ul>
<li>Main editing interfaces use dialogue boxes.
<li>Icons can be dragged between windows, including a customisable 'Picker' window containing the most commonly used icons.
<li>Multiple files can be loaded by one instantiation of <em>WinEd</em>.
<li>Conventions are based on Acorn's Style Guide.
<li>Statistics are available on the size etc of template files.
<li>Powerful features for positioning icons relative to each other.
<li>Optional rounding of coordinates in high resolution modes to ensure low resolution compatibility.
<li>Optional tool panes and keyboard short cuts enhance convenience.
<li>Fast loading and saving.
</ul></p>
<p><em>WinEd</em> was originally written by Tony Houghton and the last release by him was <a href="http://www.snowstone.org.uk/riscos/realh/index.html#wined">version 2.87</a>. This release of <em>WinEd</em> has been put together by Adam Richardson. Some changes have been made to this help file, but the majority of the text remains the work of Tony Houghton. Any comments should be made to <a href="mailto:riscos@snowstone.org.uk">Adam Richardson</a>
<p><a href="#contents">Return to contents</a></p>

<a name="requirements"><h2>2. Requirements</h2></a>
<p>This release of <em>WinEd</em> requires RISC OS 4.0 or later. It may well work on earlier systems if you manually alter the <em>!Run</em> file, but this is not supported.</p>
<p><a href="#contents">Return to contents</a></p>

<a name="conditions"><h2>3. Conditions of use and distribution</h2></a>
<p><em>WinEd</em> is released under the GNU General Public Licence. For details of what this means, <a href="Copying">see this file</a>. The source code for WinEd is available from the <a href="http://www.riscos.info/websvn/listing.php?repname=wined">svn repository on riscos.info</a>.</p>
<p><a href="#contents">Return to contents</a></p>

<a name="install"><h2>4. Installation</h2></a>
<p><em>WinEd</em> can be run from any filing system. To install <em>WinEd</em> drag it from
the directory you receive it on to the directory you want it to 'live'
in. To ensure your new copy is used in preference to the original, simply run it from the new location.</p>
<p><a href="#contents">Return to contents</a></p>

<a name="disclaimer"><h2>5. Disclaimer</h2></a>
<p>While every effort has been made to ensure this software works correctly, no responsibility for any loss or damage caused by its use is accepted by the authors.</p>
<p><a href="#contents">Return to contents</a></p>

<a name="units"><h2>6. Units used</h2></a>
<p>The units used and referred to throughout are OS units, except where
stated. If a writable icon expecting a number is left blank, zero is
assumed.</p>
<p>Remember that work area coordinates have the origin at the top left and
anything below this is negative.</p>
<p><a href="#contents">Return to contents</a></p>

<a name="mode"><h2>7. Mode independence</h2></a>
<p><em>WinEd</em> has been designed so that you do not have to design your
templates in low resolution modes to ensure compatibility. This is
done by &quot;snapping&quot; icons to a 4x4 OS unit grid. (4 OS units is equivalent to
one pixel in the lowest resolution desktop modes). This can be overridden using the
keyboard cursor arrows, together with either <code>Ctrl</code> or <code>Shift</code>.</p>
<p><a href="#contents">Return to contents</a></p>

<a name="dialogue"><h2>8. <em>WinEd</em>'s dialogue boxes</h2></a>
<p>Most of <em>WinEd</em>'s dialogue boxes are static ie a click outside them does
not close them. This slightly improves convenience and consistency.</p>
<p><a href="#contents">Return to contents</a></p>

<a name="error"><h2>9. Error handling</h2></a>
<p>Where possible, <em>WinEd</em> tries to continue after an error, but you should
save your data as soon as possible. If <em>WinEd</em> can not continue there
will be a Cancel button instead of OK or Continue. After a fatal error
<em>WinEd</em> will attempt to save files with unsaved changes in
<code>&lt;Wimp$ScrapDir&gt;.WinEd</code>. I hope you never have occasion to find this
useful :-).</p>
<p><a href="#contents">Return to contents</a></p>

<a name="help"><h2>10. Interactive help</h2></a>
<p><em>WinEd</em> supports interactive help, including its menus; you may find this
helpful at first.</p>
<p><a href="#contents">Return to contents</a></p>

<a name="loading"><h2>11. Loading and creating templates</h2></a>
<p>Template files can be loaded by double clicking or dragging them to
<em>WinEd</em>'s icon on the icon bar. The number of files <em>WinEd</em> can load and
edit is only limited by memory. To create a new file click the <em>WinEd</em>
icon; this opens an empty browser (see below).</p>
<p>Files can be merged by dragging one file into a browser containing the
other.</p>
<p><a href="#contents">Return to contents</a></p>

<a name="keyboard"><h2>12. Keyboard control of the pointer</h2></a>
<p>While <em>WinEd</em> has the input focus,
each press of one of the cursor keys moves the mouse pointer by one
pixel in the appropriate direction.</p>
<p>Alternatively, the cursor keys can
be made to 'nudge' any selected icons without using the mouse. The icons are moved by 4 OS units, unless the <code>Shift</code> or <code>Ctrl</code> modifier keys are held down, in which case the icons are moved by 2 or 1 OS units, respectively.</p>
<p><a href="#contents">Return to contents</a></p>

<a name="sprite"><h2>13. Sprite files and sprite areas</h2></a>
<p>In some windows it is necessary to create icons with sprites that
belong to an application instead of the Wimp's sprite pool. You can
load 'user' sprite files into <em>WinEd</em> by dragging them to its icon.
<em>WinEd</em> only has one sprite pool which it shares between all windows
loaded in it, but it can load sprite files dragged to any of its
windows or its icon bar.</p>
<p>Holding shift while dragging a sprite file to <em>WinEd</em> causes it to be
merged with the Wimp sprite pool and the screen is redrawn.</p>
<p>From version 2.30 onwards, all sprite area fields are saved with the
value 1 (use Wimp sprites) and <em>WinEd</em> makes no distinction between the
Wimp sprite pool and the user sprite pool. RISC OS 3 allows all sprite
area pointers to be set to a user sprite area and it will look for
sprites in the Wimp pool if they are not found in the user's area. It
is up to the target application to change sprite area pointers to its
own sprite area if necessary.</p>
<p><a href="#contents">Return to contents</a></p>

<a name="iconbar"><h2>14. The icon bar menu</h2></a>

<h3>Info</h3>
<p>Moving the pointer right opens a typical dialogue box containing
information about <em>WinEd</em> including button to email the author or visit the <em>WinEd</em> website.</p>

<h3>Help</h3>
<p>Clicking on this option will launch this file. (If a browser has not been seen when you click on the option, an old, text, version of this manual will open.)</p>

<h3>Icon picker</h3>
<p>This opens the icon picker immediately above the right hand end of the
icon bar. The icon picker is described in a later section.</p>

<h3>Monitor</h3>
<p>This opens the monitor window at the top right of the screen. The
monitor is described in a later section.</p>

<h3>Clear sprites</h3>
<p>Clears the user sprite area to save memory.</p>
<p><a href="#contents">Return to contents</a></p>

<a name="choices"><h2>15. The Choices dialogue box</h2></a>

<h3>Automatic monitor</h3>
<p>If selected the monitor will automatically open and close when editable
or preview windows are opened and closed, as described in the section
about The monitor.</p>

<h3>Automatic icon picker</h3>
<p>This makes the icon picker open and close with editable windows in a
similar way to the monitor.</p>

<h3>Browser tool bar</h3>
<p>This causes a tool bar to be displayed along the top of browsers.</p>

<h3>Editor panes</h3>
<p>If this option is set, the two large dialogue boxes for editing windows
and icons will have their main action buttons in panes.</p>

<h3>Editable window tool bar</h3>
<p>This causes a tool pane to be attached to the top left of editable
windows.</p>

<h3>Editable window furniture</h3>
<p>This causes editable windows to be displayed with all the tools (title
bar, scroll bars etc) to save you having to repeatedly switch them on
and off every time you want to move or scroll the window. A Preview
system is provided to see how your windows will actually look.</p>

<h3>Keyboard short cuts</h3>
<p>If selected, browsers and editable windows will claim input focus and
respond to keyboard short cuts. The short cuts are shown in the menus
if this option is selected.</p>

<h3>Move selection without mouse</h3>
<p>If selected, selected icons in editable windows can be nudged with the
cursor keys instead of the keys only nudging the mouse pointer. The icons will
move by 4 OS units at a time. Holding down <code>Shift</code> while nudging will
make the steps only 2 OS units and holding down <code>Ctrl</code> will make the
steps only 1 OS unit per keypress.</p>

<h3>Confirm deletions</h3>
<p>If selected, you will be prompted with an error box before deleting any
icons or windows.</p>

<h3>Autoload sprites</h3>
<p>When a template file is loaded <em>WinEd</em> will load a Sprites or Sprites22
file from the same directory if one exists and this option is set.</p>

<h3>FormEd compatible strings</h3>
<p>All strings in template files are supposed to use CR (carriagereturn)
terminators. The Wimp's template SWIs, and most applications, work
with any control character terminator, but FormEd is a notable
exception, which insists on CR for most strings. <em>WinEd</em> now uses CR by
default, but if this option is unticked, it will use only zero
terminators, which may be useful if you're programming lazily in C :).</p>

<h3>Strict with panes</h3>
<p>If selected, windows with the pane flag set will have certain other
flags disabled to avoid unusual behaviour in the target application.</p>
<p><a href="#contents">Return to contents</a></p>

<h3>Always show borders</h3>
<p>If selected, all editable icons will be drawn with borders, making it
easier to line them up with each other without using the automated
features <em>WinEd</em> provides.</p>

<h3>Hatch user-drawn windows</h3>
<p>If selected, a cross hatch pattern will be displayed in any editable
window which needs the task's help to be redrawn.</p>

<h3>Display templates sorted</h3>
<p>If selected, the templates displayed in the <code>Browser</code> window will be listed in
alphabetical order. The ordering in the physical template file will not be affected.</p>

<a name="browsers"><h2>16. Browsers</h2></a>
<p>Browser is the term for a window which displays a list of the
window/dialogue box definitions in a file. Each entry is shown as a
small icon depicting a dialogue box (with no scroll bars) or window
(with scroll bars) next to its template identifier. The icons change to
indicate whether the window is currently open. The windows are
displayed either in alphabetical order or in the order they appear in the file, depending on the <code>Display templates sorted</code> option in the <a href="#choices">choices window</a>.</p>
<p>If you click Adjust on a browser's close tool <em>WinEd</em> will attempt to
open the directory the templates were last loaded or saved in, keeping
the browser open if you hold <code>Shift</code>. Iconising a browser (<code>Shift-Select</code>
on the close tool) closes any windows which 'belong' to it, thus it can
be used for a quick tidyup. De-iconising the browser will re-open the closed windows.</p>
<p><a href="#contents">Return to contents</a></p>

<a name="mouse"><h2>17. Mouse operations in browsers</h2></a>
<p>Where 'work area' is shown in brackets below it refers to clicking over
a part of the window not covered by an icon. Similarly, '(icon)' means
clicking over an icon; each icon corresponds to a window or dialogue
box definition. If neither are specified it refers to any part of the
window. Holding down Ctrl while clicking has the effect of forcing the
action to behave as if the click is over the work area, ignoring any
icon.</p>
<p><table>
<tr><td>Select (icon)</td><td>Exclusively select icon</td></tr>
<tr><td>Select (work area)</td><td>Clear selection</td></tr>
<tr><td>Adjust (icon)</td><td>Toggle selection state of icon without affecting others</td></tr>
<tr><td>Double-click Select (icon)</td><td>Open window for editing, or close it if already open</td></tr>
<tr><td>Double-click Adjust (icon)</td><td>Open window for preview, or close it if already open</td></tr>
<tr><td>Drag Select (work area)</td><td>Start dragging rubber box; when complete all icons within the box are selected</td></tr>
<tr><td>Drag Select (icon)</td><td>Start drag &amp; drop operation on current selection, saving it with a filename of &quot;Selection&quot;.</td></tr>
<tr><td>Drag Adjust</td><td>Start dragging rubber box; all icons inside will have their selection state toggled</td></tr>
<tr><td>Menu</td><td>Open browser menu.</td></tr>
</table></p>
<p><a href="#contents">Return to contents</a></p>

<a name="browsermenu"><h2>18. The browser menu</h2></a>

<h3>Create</h3>
<p>Move the pointer right to create a new window. This must contain at
least one character, and you will be asked for confirmation if you are
about to overwrite any existing windows with the same name.</p>

<h3>Statistics</h3>
<p>Opens a statistics window for the file in the browser. This is
described below.</p>
<p><a href="#contents">Return to contents</a></p>

<a name="save"><h2>19. Saving templates</h2></a>
<p>If one or more windows are selected the Selection button will be
selectable. Select this if you only want to save the selected
templates. Note that when you save a selection, the fonts for the
whole file are saved with it. To remove superfluous fonts load the new
file back into <em>WinEd</em> and resave.</p>
<p><a href="#contents">Return to contents</a></p>

<a name="stats"><h2>20. Statistics windows</h2></a>
<p>The top row shows the column headings. The Identifier column shows the
name of the window, Icons shows how many icons the window contains.
Buffer shows the size of the buffer needed to load the window block
with Wimp_LoadTemplate; similarly Indirected shows the size of buffer
needed to hold the icons' indirected data. Note that the Buffer size
is the size that will be requested by Wimp_LoadTemplate and includes
the Wimp's scratch buffer for indirected data.</p>
<p>Each row in the main section of the window shows the data described
above for each window definition in the file.</p>
<p>The penultimate row shows the total of each column for all the windows
in the file.</p>
<p>The bottom row shows, from left to right, the number of windows in the
file, the number of different font definitions used, and the size in
bytes of the file as stored on disc. Note the latter is generally
smaller than the total size needed to load the templates, this is
because only the parts of indirected strings which contain data are
stored in the file, but the application using the templates needs to
reserve space for the maximum possible length of the string.</p>
<p><a href="#contents">Return to contents</a></p>

<a name="browsertool"><h2>21. The browser tool bar</h2></a>
<p>This is a row of tool icons which can optionally be displayed along the
top of browser windows. The tools provide short cuts for the functions
described above, available from the browser menu. They are (from left
to right):</p>
<p><ul>
<li>Create (opens writable submenu)
<li>Select all (Select mouse button) / Clear selection (Adjust mouse button)
<li>Save
<li>Copy (opens writable submenu)
<li>Rename (opens writable submenu)
<li>Delete
<li>Statistics
</ul></p>
<p><a href="#contents">Return to contents</a></p>

<a name="export"><h2>22. Exporting icon names</h2></a>
<p>The last entry on the selected window(s) submenu of the browser menu
leads to a &quot;Save as&quot; dialogue box for exporting icon names for all selected windows. An icon can
be given a name using an <code>N</code> in its validation string.
<em>WinEd</em> will export the icon names in text format if the <code>enum</code> or <code>Messages</code> options
are chosen. The <code>enum</code> option is useful for including in C programs
and the <code>Messages</code> option is intended for use for icon help text in an
application's &quot;Messages&quot; file. If <code>Basic</code> is selected
the output is written to a Basic file, for use in Basic
programs. Note that the output of any of these options can be altered by editing
<em>WinEd</em>'s <code>Messages</code> file. See
the chapter on <a href="#custom">customisation</a>.</p>
<p><a href="#contents">Return to contents</a></p>

<a name="preview"><h2>23. Preview windows</h2></a>
<p>Since editable windows have their attributes altered to make them
easier to edit, it is necessary to have a system of viewing exactly how
your finished windows will look and behave. This is what preview
windows are for. They can be opened by double clicking Adjust on a
window in a browser or by choosing Preview from the browser menu.</p>
<p>Previews can also be used to fine tune the size and appearance of
windows in ways which are not practical or possible with editable
windows.</p>
<p>It is possible to drag a preview window by dragging an empty part (ie
not covered by an icon) of its work area while pressing Ctrl. Using
Select has the same effect as dragging the title bar (move window) and
Adjust is the same as dragging the adjust size tool (resize window).</p>
<p>It may also be necessary to see how windows fit with each other (eg for
panes) without superfluous tools.</p>
<p>Once you are satisfied with the size and position of a preview window
remember to store the position and size with the preview menu (see
below), otherwise they will be reset next time you open the window.</p>
<p><a href="#contents">Return to contents</a></p>

<a name="previewmenu"><h2>24. The preview menu</h2></a>

<h3>Store position</h3>
<p>Stores the current onscreen size and position of the window in the
template definition.</p>

<h3>Store icon states</h3>
<p>Stores the selection states of the window's icons in the template
definition. However, it is better practice to leave any selection to
the application which finally uses the templates.</p>
<p><a href="#contents">Return to contents</a></p>

<a name="edit"><h2>25. Editable windows</h2></a>
<p>The changes you make to editable windows directly affect the template
data, including moving and resizing. Editable windows are optionally
always shown with all tools (title bar, scroll bars etc) to make
editing easier. All icons are given the same button type to make them
selectable. This means that they do not appear exactly as they will when
used in your program. (In particular, many of the cosmetic changes
introduced in RISC OS Select will not be shown.) To see how your windows
will really look use the preview system.</p>
<p>Many of the following sections refer to dialogue boxes; each of these
is described in its own section.</p>
<p><a href="#contents">Return to contents</a></p>

<a name="mouseedit"><h2>26. Mouse operations in editable windows</h2></a>
<p>These are summarised below with notes. Note also that all mouse
operations in editable windows can be modified in the same way with the
<code>Ctrl</code> key. This has the effect of making the operation act as if over
an empty bit of work area instead of over an icon. All irreversible
drags (ie excepting rubber boxes) can be cancelled by pressing <code>Esc</code> when
you release the mouse.</p>
<p>Note that moving and resizing icons by dragging will always round the result to a multiple of 4 OS units. For more precise control when moving icons, you can use the cursor keys instead (together with the <code>Ctrl</code> and <code>Shift</code> modifiers. Small changes to the size of icons must be done via the <code>Coordinates</code> dialogue box.</p>
<p><table>
<tr><td>Select (work area)</td><td>Clear selection</td></tr>
<tr><td>Select (non-selected icon)</td><td>Exclusively select icon</td></tr>
<tr><td>Menu</td><td>Open editable window menu</td></tr>
<tr><td>Adjust (non-selected icon)</td><td>Select icon without affecting others</td></tr>
<tr><td>Adjust (selected icon)</td><td>Deselect icon</td></tr>
<tr><td>Drag Select (work area)</td><td>Drag a rubber box to select icons<sup><a href="#one">1</a></sup></td></tr>
<tr><td>Drag Select (icon)</td><td>Move (local) / Copy (export) icon<sup><a href="#two">2</a></sup></td></tr>
<tr><td>Drag Adjust (work area)</td><td>Drag a rubber box to invert the selection state of icons<sup><a href="#one">1</a></sup></td></tr>
<tr><td>Drag Adjust (icon)</td><td>Resize icon, moving the edge nearest the pointer<sup><a href="#three">3</a></sup></td></tr>
<tr><td>Drag Shift-Adjust (icon)</td><td>Resize icon, moving the corner nearest the pointer<sup><a href="#three">3</a></sup></td></tr>
<tr><td>Drag Shift-Select (icon)</td><td>Copy (local)/Move (export) icon<sup><a href="#two">2</a></sup></td></tr>
<tr><td>Drag Shift-Ctrl-Select</td><td>Move window as if dragging title bar</td></tr>
<tr><td>Drag Shift-Ctrl-Adjust</td><td>Resize window as if dragging adjust size tool</td></tr>
<tr><td>Double click Select (work area)</td><td>Edit window (open dialogue)<sup><a href="#four">4</a></sup></td></tr>
<tr><td>Double click Select (icon)</td><td>Edit icon(s) (open dialogue)<sup><a href="#five">5</a></sup></td></tr>
<tr><td>Double click Adjust (work area)</td><td>Edit work area (open dialogue)<sup><a href="#four">4</a></sup></td></tr>
<tr><td>Double click Adjust (icon)</td><td>Minimise icon<sup><a href="#six">6</a></sup></td></tr>
<tr><td>Double click Shift-Select (work area)</td><td>Edit window title icon (open dialogue)<sup><a href="#four">4</a></sup></td></tr>
</table></p>

<p><a name="one"><sup>1</sup></a> This is similar to the same type of drag in browsers.</p>
<p><a name="two"><sup>2</sup></a> This follows the conventions of Drag &amp; Drop as outlined in the
Style Guide. The unmodified drag and Shiftmodified drag have the
opposite effect depending on whether the drag is local (finishing in
the same window as it started) or an export (to a different window).
In the local case an unmodified drag moves the icon and a Shiftdrag
copies it, in the export case an unmodified drag copies the icon, a
Shiftdrag effectively moves the icon by making a copy in the
destination window and deleting the original. If the pointer leaves
the window during a drag the window is scrolled if possible; if the
drag turns out to be an export the scroll bars are reset to their
original positions. The Shift key is polled at the start of the drag,
not the end.</p>
<p><a name="three"><sup>3</sup></a> Resize drags are limited by the window's visible area.</p>
<p><a name="four"><sup>4</sup></a> These operations open the relevant dialogue box.</p>
<p><a name="five"><sup>5</sup></a> See &quot;Edit... &quot;below.</p>
<p><a name="six"><sup>6</sup></a> This minimises both the width and height of an icon;
minimisation makes the icon just large enough to display its contents
and is described in more detail in the section about the Resize icons
dialogue box.</p>
<p><a href="#contents">Return to contents</a></p>

<a name="select"><h2>27. Selected icon(s) submenu</h2></a>

<h3>Delete</h3>
<p>Deletes the selected icon(s). Deleted icons are entirely removed from
the template; any icons with higher numbers are renumbered to 'fill the
gap'. The <code>Delete</code> key (in addition to <code>Ctrl-K</code>) can be used to
delete an icon using the keyboard.</p>

<h3>Renumber nn</h3>
<p>Renumbers the selection, starting from the number shown. A different
number can be entered by moving the pointer right. Groups of icons can
be renumbered as well as single icons. When renumbering a group they
are kept in the same order but are made consecutive, starting from the
new number. After renumbering the number in the menu and dialogue box
is updated to the number following the new number of the last
renumbered icon.</p>

<h3>Copy</h3>
<p>This menu item leads to a submenu where you can choose to copy the current selection
of icons either up, down, left or right.

<h3>Edit...</h3>
<p>If only one icon is selected, the Edit icon dialogue box is opened, if
more than one is selected, the Edit multiple icons dialogue is opened.</p>
<p><a href="#contents">Return to contents</a></p>

<a name="edittool"><h2>28. The editable window tool bar</h2></a>
<p>This is optionally attached to the topleft edge of editable windows
and provides short cuts for the menu functions described above. The
tools are (left to right, top to bottom):</p>
<p><ul>
<li>Edit window...
<li>Edit title...
<li>Work area...
<li>Visible area...
<li>Delete
<li>Renumber (Select opens dialogue box, Adjust renumbers with value currently shown in menu)
<li>Align...
<li>Space out...
<li>Resize...
<li>Coords...
<li>Frame...
<li>Select all (Select mouse button) / Clear selection (Adjust mouse button)
</ul></p>
<p><a href="#contents">Return to contents</a></p>

<a name="editwindow"><h2>29. Edit window dialogue box</h2></a>
<p>Most of the option buttons in this dialogue box correspond directly to
window flags documented in the PRM and other books. The names of the
colours are abbreviated to save space. They are:</p>
<p><table>
<tr><td>Title F.</td><td>Title bar Foreground.</td></tr>
<tr><td>Title B.</td><td>Title bar Background.</td></tr>
<tr><td>Work F.</td><td>Work area Foreground.</td></tr>
<tr><td>Work B</td><td>Work area Background.</td></tr>
<tr><td>Scr. Out.</td><td>Scroll bar Outer.</td></tr>
<tr><td>Scr. In.</td><td>Scroll bar Inner.</td></tr>
<tr><td>Input Focus</td><td>Input focus (the colour the title bar changes to when the window has input focus).</td></tr>
</table></p>

<h3>Default</h3>
<p>Sets all the colours to their recommended default values. This button
doesn't close the dialogue box.</p>

<h3>GCOL colours</h3>
<p>If set the above colours are taken to be GCOL values. This was
originally intended for 256 colour modes and should not really be used.
 <em>WinEd</em> only supports colours in the usual range of 0-15 (and 255/1 for
transparent). This option is unavailable if <code>24bit title colour</code> is chosen.</p>
<p><a href="#contents">Return to contents</a></p>

<a name="monitor"><h2>30. The monitor</h2></a>
<p>The monitor shows the following information about any window/icon under
the pointer, provided it is in a template loaded in <em>WinEd</em>.</p>

<h3>Window</h3>
<p>The identifier of the window under the pointer. A trailing * means it
is an editable window, otherwise it is a preview window.</p>

<h3>Icon no.</h3>
<p>The number of the icon under the pointer, or &quot;Work area&quot;.</p>

<h3>Icon name</h3>
<p>This displays the icon name (if present), as given by using the <code>N</code> validation
option in an indirected icon's validation string.</p>

<h3>Position</h3>
<p>The work area coordinate of each edge of the icon.</p>

<h3>Size</h3>
<p>The size of the icon, shown as &lt;width&gt; x &lt;height&gt;.</p>
<p>If the pointer is over an empty bit of work area instead of an icon,
the dimensions refer to the visible portion of the work area. This
information is generally the most useful, it can be used to accurately
position icons near the visible edge of a window.</p>
<p>The monitor can be opened from the icon bar menu and closed with its
close icon as a manual override, but it also opens automatically (this
is optional) when any editable or preview windows are opened and closes
when no editable or preview windows are open.</p>
<p><a href="#contents">Return to contents</a></p>

<a name="creatingicons"><h2>31. Creating icons: the Icon picker</h2></a>
<p>The icon picker is a convenient alternative to creating icons from a
menu. You simply drag one or more icons from the picker to where you
want them in an editable window. It behaves rather like an editable
window, but most of the functions are suppressed. The only action
which can be carried out, apart from making selections, is to export
icons from it to other editable windows.</p>
<p>Like the monitor the icon picker can be opened from the icon bar menu
and closed with its close icon as a manual override, but it also opens
automatically when any editable or preview windows are opened and
closes when no editable or preview windows are open.</p>
<p>The icon picker contains examples of most of the common types of icon,
but it can be customised. See the section on Customising <em>WinEd</em>.</p>
<p><a href="#contents">Return to contents</a></p>

<a name="workarea"><h2>32. Work area dialogue box</h2></a>
<p>The work area coordinates are shown in formation. Note that it is
usual to have the origin of the window (0) at the top, and the bottom
coordinate is negative.</p>
<p>The bumper buttons cause the sizes to change in units of 4, unless the <code>Shift</code> or <code>Ctrl</code> modifier keys are pressed, in which case the numbers are altered in units of 2 and 1, respectively.</p> 


<h3>Minimise</h3>
<p>This sets the values in the work area coordinate fields to the work
area coordinates of the portion of the window currently visible. It is
not recommended that the origin (X0 &amp; Y1) coordinates are set to any
value other than zero, hence the Keep origin button is provided.</p>

<h3>Keep origin</h3>
<p>This has a similar effect to the Minimise button, but the origin (X0 &amp;
Y1) coordinates are set to zero.</p>

<h3>Minimum size</h3>
<p>These icons set the minimum size (both values are positive) the window
can be dragged to with the Adjust size tool. Zero values mean the size
will be determined by the size of the title bar and window tools. The
Maximise button sets the values to the current size of the window.</p>
<p><a href="#contents">Return to contents</a></p>

<a name="visiblearea"><h2>33. Visible area dialogue box</h2></a>
<p>This allows you to specify the position, size and scroll offsets of a
window as it will appear on screen when first opened. All values are
usually positive, except for the vertical scroll offset (V Scroll),
which should be negative.</p>
<p>The bumper buttons cause the sizes to change in units of 4, unless the <code>Shift</code> or <code>Ctrl</code> modifier keys are pressed, in which case the numbers are altered in units of 2 and 1, respectively.</p> 

<p><a href="#contents">Return to contents</a></p>

<a name="editicon"><h2>34. Edit icon/title dialogue box</h2></a>
<p>Most of the entries in this window correspond to icon flags and
properties described in the PRM or other books.</p>

<h3>Test/sprite</h3>
<p>If the icon contains a text or sprite, enter the text or sprite name
here.</p>

<h3>Validation</h3>
<p>You can enter a validation string here for indirected text icons.</p>

<h3>Max text length</h3>
<p>Enter the maximum allowed length (including terminator) of the text for
indirected text icons. This can be set to the length of the string in
the Text/sprite field by clicking the Minimise button.</p>

<h3>Outline font</h3>
<p>If set the icon uses the outline font shown in the field below; fonts
can be chosen from a menu by clicking the menu button. The height can
be entered in points (decimals are allowed). The Aspect ratio is the
ratio of width to height expressed as a percentage.</p>
<p>Outline fonts do not seem to work in icons with validation strings
containing the L command.</p>

<h3>Validate</h3>
<p>Font handles overwrite the colour fields in icon flags, therefore the
colour data is held in an F command in the validation string. The
Validate button reads the colours from the fields in the dialogue box
and ensures the validation string contains the correct L command,
forcing the indirected flag on if necessary.</p>

<h3>Don't resize / Update</h3>
<p>These both update the template data with settings from the dialogue
box. Update also resizes the icon if it is currently too small to
display its data (see Resize icons dialogue box).</p>
<p><a href="#contents">Return to contents</a></p>

<a name="editicons"><h2>35. Edit multiple icons dialogue box</h2></a>
<p><em>WinEd</em> can apply changes to a subset of the icon flags to a selection of
icons simultaneously; only those which do not affect icon data or
outline fonts can be changed for a multiple selection.</p>
<p>For simple on/off flags you can choose one of the radios Y, N or ?,
meaning set the flag for all selected icons, reset it, or leave this
flag alone for each icon respectively. For ESG and Button type tick
the option button on the left to enable a value to be entered for all
selected icons, otherwise they will not be affected.</p>
<p><a href="#contents">Return to contents</a></p>

<a name="align"><h2>36. Align dialogue box</h2></a>
<p>This is opened from an editable window menu tree. It is for aligning
groups of icons with each other. The top group of radio icons
determines along which edge the icons will be aligned. If only one
icon is selected it can be centred in its window.</p>

<h3>Left</h3>
<p>The icons will all share the same left (minimum x) coordinate.</p>

<h3>H centre</h3>
<p>The icons will be arranged so that half their width is each side of a
notional vertical midline. This midline is calculated from the
leftmost or rightmost midpoint of all the icons, depending on
whether the Move left or Move right icon is selected.</p>

<h3>Right</h3>
<p>The icons will all share the same right (maximum x) coordinate.</p>

<h3>Top</h3>
<p>The icons will all share the same top (maximum y) coordinate.</p>

<h3>V centre</h3>
<p>The icons will be arranged so that half their height is each side of a
notional horizontal midline. This midline is calculated from the
topmost or bottommost midpoint of all the icons, depending on whether
the Move down or Move up icon is selected.</p>

<h3>Bottom</h3>
<p>The icons will all share the same bottom (minimum y) coordinate.</p>

<h3>Group box &amp; label</h3>
<p>This is only applicable if exactly two icons are selected in the
editable window and the lowernumbered of them has a border and no text
and the other has text and no border. The icons will be aligned so
that the label's left edge 32 OS units to the right of the left edge of
the group box and its bottom edge is 24 OS units below the top of the
group box (ideal for labels 44 OS units high).</p>

<h3>Move / Resize</h3>
<p>Icons can either be moved or resized to achieve alignment. If Move is
chosen, icons are moved without changing their size. If Resize is
chosen, only the edge that has to be aligned is moved, thus resizing
the icon; icons will not be allowed to become too small to be selected.</p>

<h3>Move left/down/label / Move right/up/box</h3>
<p>These determine which way the icons will be moved or resized. For
instance if one of the horizontal alignments is selected above and Move
left is selected all the icons will be aligned with the originally
leftmost icon. In the special case of Group box &amp; label these options
determine whether the label or the box is moved.</p>

<h3>Centre in window</h3>
<p>If this is selected instead of one of the above, the centre of the
window is chosen as the reference point instead of one of the icons,
and it only allows alignment of centres, not edges.</p>
<p><a href="#contents">Return to contents</a></p>

<a name="space"><h2>37. Space out dialogue box</h2></a>
<p>Opened from an editable window menu tree, the Space out dialogue box
can either be used to space a group of icons out from each other or a
single icon from the edge of the visible area.</p>
<p>The icons are sorted into order depending on their horizontal or
vertical positions and spaced out from each other by the number of OS
units entered in the Gap icon. The direction radio icons determine
which icon is used as the 'anchor' eg if you choose From left the
leftmost icon stays still and all the others are spaced out to its
right.</p>
<p>If only a single icon is selected it is spaced out from the edge of the
visible area corresponding to the direction radio icons.</p>
<p><a href="#contents">Return to contents</a></p>

<a name="resize"><h2>38. Resize icons dialogue box</h2></a>
<p>This dialogue box is for changing the size of icons, either making a
group all the same size, making a single icon or group just large
enough to display its data, or a single icon a specified size. The
resizing is carried out on the right and top edges, leaving the bottom
left corner fixed.</p>

<h3>Minimise</h3>
<p>These action buttons change the width and/or height of the selected
icon(s), making it just large enough to display its data, using fairly
intelligent rules.</p>
<p>The size needed for text (taking outline fonts into account) is first
calculated, adding a few pixels to each side to satisfy Style Guide
conventions. Then the size needed for any sprite is calculated if
possible. These two sizes are combined, taking into account the icon's
alignment flags. If there is a border, sufficient pixels are added,
depending on the type of border. If the icon still has a zero size it
is made just large enough to click with the mouse.</p>
<p>Icons with 'L' validation commands can now also be minimised fairly
sensibly. The program ensures that the current width is sufficient to
display the longest word, then makes the icon just the right size to
preserve the current format of the text. This does not take outline
fonts into account - they do not work with the L command in RISC OS 3.1
anyway.</p>
<p>Versions 2.12 onwards ensure that icons that use the system font are
also large enough for the current RISC PC Desktop font. If the Desktop
font is the System font or you are using RISC OS 3.1 Homerton.Medium
(12pt) is used. Note that this does not apply to L validation, but it
is unlikely that an outline font will take more room than the System
font for long strings.</p>

<h3>Make same size</h3>
<p>This only applies to multiple selections. All the icons can be set to
the same width or height, either taking on the width of the narrowest
or the widest or the height of the tallest or shortest.</p>

<h3>Excluding borders</h3>
<p>If this option is set while making a group of icons the same size as
each other, only the size of the icons inside their borders is made the
same, so icons with wider borders will be larger overall. This is most
useful for sets of action buttons where the default action button is
the same size as the others with an additional trench around it.</p>
<p><a href="#contents">Return to contents</a></p>

<a name="coords"><h2>39. Coordinates dialogue box</h2></a>
<p>This allows you to enter the position (relative to the window's work
area) and size coordinates of an icon. The Top entry is usually
negative.</p>
<p>The bumper buttons cause the sizes to change in units of 4, unless the <code>Shift</code> or <code>Ctrl</code> modifier keys are pressed, in which case the numbers are altered in units of 2 and 1, respectively.</p> 
<p><a href="#contents">Return to contents</a></p>

<a name="frame"><h2>40. Frame dialogue box</h2></a>
<p>This is for placing a frame around the selected icons. The frame can
consist of the window's visible area or an empty bordered icon (group
box) with a lower number than any of the selected icons.</p>
<p>The bumper buttons cause the sizes to change in units of 4, unless the <code>Shift</code> or <code>Ctrl</code> modifier keys are pressed, in which case the numbers are altered in units of 2 and 1, respectively.</p> 


<h3>Gap</h3>
<p>Enter the minimum gap (OS units) to leave between the frame and any
icons inside it. This varies depending on whether the frame is the
window's visible area (816 looks best) or an icon with a 3D border
(usually R4 validation, 20 or more looks better).</p>

<h3>Visible area</h3>
<p>If selected the frame is made by resizing the window's visible area to
fit the selection. The window's work area must be large enough to
accommodate it.</p>

<h3>Icon</h3>
<p>If selected the frame is made by moving and resizing the icon specified
in the adjacent writable field to make a group box. It must satisfy
the requirements outlined above.</p>

<h3>Allow for label</h3>
<p>Group boxes often have a label at the top. If this option is selected
an extra gap (read from the writable icon, the default is 24 OS units)
is left between the top of the frame and the topmost selected icon to
make room for a text label.</p>

<h3>Top, Left, Right, Bottom</h3>
<p>Only the frame's edges indicated by which of these icons are selected
are moved (unless the frame would become too small or have negative
size). This is useful because frames are often initially placed in
relation to objects outside them and resized when their contents have
been entered.</p>
<p><a href="#contents">Return to contents</a></p>

<a name="hints"><h2>41. Hints &amp; tips</h2></a>

<h3>Size of dialogue boxes</h3>
<p>When designing dialogue boxes and nonscrollable windows, try to make
sure they will fit on screen in as many modes as possible. Mode 22
support (768 * 576 OS units) is not strictly necessary, but you should
at least fit your windows on a Mode 27 screen (1280 * 960 OS units).
The Style Guide recommends a maximum of 800 * 600 OS units for dialogue
boxes.</p>

<h3>Positioning icons</h3>
<p>Icons with similar functions should be the same size as each other and
aligned. When aligning icons, some of which have double borders (eg R6
validation), align with the inner border (use the centre alignment
options). If a dialogue box has several groups of icons (eg two or
more groups of radio icons with two or more different ESG's) place
group boxes around them.</p>
<p>Place action icons, particularly the default action and Cancel buttons
aligned up the side or preferably along the bottom of dialogue boxes.
Position the default action button at the bottom right.</p>
<p>Your dialogue boxes will look more attractive the more you space out
icons, up to a point. The larger the dialogue box, the more space you
should leave. The Style Guide suggests a gap of at least 8 OS units
between icons, but 16 or more generally looks far better.</p>
<p>Note that <em>WinEd</em>'s window and icon editing dialogue boxes are not spaced
out very much, in this case it was considered more important to make
them as small as possible. It is also unconventional to have scrolling
dialogue boxes unless they are a pane with the default action and
Cancel buttons in the parent window so they are also visible. Panes
were used in <em>WinEd</em> 1.00, but were too restrictive.</p>

<h3>Writable icons</h3>
<p>Use a validation string containing Kta, not Ktar as the Style Guide
suggests. Due to a bug in RISC OS 3.1 this must be the last entry in a
validation string to work correctly.</p>

<h3>Outline fonts</h3>
<p>Outline fonts in icons should generally be avoided. Apart from the
latest versions of RISC OS now being able to automatically use outline
fonts in all icons there are a couple of bugs.</p>
<p>In RISC OS 3.1 using an outline font in the title bar of a window
causes a terrible mess if a customised title bar (eg NewLook's 3D one)
is used.</p>
<p>In RISC OS 3.5 using an outline font in slabbing icons (R5 and R6
validation) causes the default desktop font to be reset or disappear or
something.</p>
<p>In RISC OS 3.1 at least, outline fonts seem to be incompatible with 'L'
validation commands.</p>

<h3>Modifying other people's templates</h3>
<p>Be careful when modifying other people's templates; always make sure
you have a backup of the original file. Some programs may object to
changes in their template files eg adding outline fonts, changing the
order of windows in the file, and increasing the amount of indirected
data. Never renumber any icons.</p>

<h3>Deleting icons</h3>
<p>Unlike many template editors, when deleting an icon in <em>WinEd</em> its
definition is entirely removed from the template, subsequent icons are
renumbered to 'fill the gap'.</p>
<p>The Delete flag is best avoided, having deleted icons in your templates
can cause confusion when using other template editors.</p>
<p><a href="#contents">Return to contents</a></p>

<a name="custom"><h2>42. Customising <em>WinEd</em></h2></a>
<p>As well as the Choices dialogue box <em>WinEd</em> can be customised by editing
its own template file; this is the file called <code>Templates</code> within the
<em>WinEd</em> resources directory.</p>
<p><em>WinEd</em> can not handle outline fonts in its own template file, but
changing the order of windows and the amount of indirected data is not
a problem.</p>
<p>Some windows you may wish to customise are:</p>

<h3>Icon picker</h3>
<p>You can put any icons you want in here (but no outline fonts),
depending on which icons you like to create most often. Its initial
position depends on its template.</p>

<h3>Monitor</h3>
<p>The monitor's initial position depends on its template.</p>

<h3>Edit window dialogue box / Edit icon dialogue box</h3>
<p>The shape, size and initial positions of these dialogue boxes may be
inconvenient to you so you may wish to rearrange the icons. Do not
renumber or delete any icons; if you want to get rid of any
nonfunctional icons such as group boxes and labels, temporarily
enlarge the work area and move them out of the way. Remember you can
turn the command button panes off in Choices if you want to reshape the
window.</p>

<h3>Tool panes</h3>
<p>You can customise these by editing the WinTools and BrowTools templates
and/or the Sprites and Sprites22 files. Note that you will have to
disable the Editable window tool icons option to avoid inadvertently
resizing the current browser tool bar while editing it. You can make
these panes any size you like, within reason. If you design some that
you think are better than mine, which are perhaps a little small,
please let me know.</p>
<p>Many of the default values shown in writable icons etc in the dialogue
boxes are determined by the values in <em>WinEd</em>'s templates.</p>
<p>If you alter <em>WinEd</em>'s templates be sure to back up the original file;
<em>WinEd</em> must be distributed with this Templates file.</p>

<h3>Exporting icon names</h3>
<p>The format in which icon names are exported is highly configurable by
editing the Messages file. For example, look at the export template
messages as supplied; you should find them at the bottom of the file:</p>
<p><code>
<br>E_Preamble:/* Icon names exported by WinEd */\n\n
<br>E_PreWin:/* Icons for window %0 */\ntypedef enum {\n
<br>E_1stIcon:  %0_%1 = %2,\n
<br>E_Icon:  %0_%1 = %2,\n
<br>E_OneIcon:  %0_%1 = %2,\n
<br>E_LastIcon:  %0_%1 = %2\n
<br>E_PostWin:} %0_icons;\n\n
<br>E_Postamble:\n
</code></p>
<p>(Note: there are three sets of messages, which are used depending on the radio
icons in the export save box. The lines starting with <code>E_</code> or
<code>M_</code> both produce plain text files and the <code>B_</code> lines are
used to write a tokenised Basic file.)</p>
<p>The string up to and including the colon at the beginning of each line
is the tag used by the program to look up the message. The following
text is the message that will be substituted. In each line, the
following parameters can be substituted:</p>
<p><table>
<tr><td>%0</td><td>Window template name</td></tr>
<tr><td>%1</td><td>Icon name</td></tr>
<tr><td>%2</td><td>Icon number</td></tr>
<tr><td>%3</td><td>Date and time</td></tr>
</table></p>
<p>Note that <code>%1</code> and <code>%2</code> are undefined for <code>E_Preamble</code>, <code>E_PreWin</code>, <code>E_PostWin</code> and <code>E_Postamble</code>, and <code>%0</code> is undefined for <code>E_Preamble</code> and <code>E_Postamble</code>. You need not use all the substitutions available for any message.</p>
<p>In text-based exports, a tab character is substituted for a <code>\t</code>. Other
characters following a backslash will be written, but cause the
backslash to be ignored, so you can use <code>\\</code> to include a backslash in
your messages.</p>
<p>In both text-based and tokenised Basic outputs, a new line will be inserted when a
<code>\n</code> is encountered. Finally, to allow a % character to be included in a
message you must type <code>%%</code>.</p>
<p><code>E_Preamble</code> is a message that will appear at the top of an icon names
file, and <code>E_Postamble</code> will appear at the end. <code>E_PreWin</code> appears at the
start of each window and <code>E_PostWin</code> at the end; they will not be written
for a window with no icons. <code>E_1stIcon</code>, <code>E_LastIcon</code> and <code>E_Icon</code> are the
messages for the first, last and any other icon in each window
respectively. If a window has one icon, <code>E_OneIcon</code> is used.</p>
<p><a href="#contents">Return to contents</a></p>

<a name="bug"><h2>43. Bug reports &amp; suggestions</h2></a>
<p>Although every effort has been made to iron out bugs, no application is completely bug free so you are advised to save your work regularly. Please report any bugs you find to <a href="mailto:riscos@snowstone.org.uk">Adam Richardson</a>.</p>
<p><a href="#contents">Return to contents</a></p>

<a name="acknowledgements"><h2>44. Acknowledgements</h2></a>
<p><em>WinEd</em> was written originally written by Tony Houghton in C (compiled by Acorn C Release 5) with extensive
use of <a href="http://www.riscos.info/index.php/DeskLib"><em>DeskLib</em></a>. This version has been compiled using <a href="http://www.riscos.info/index.php/GCCSDK"><em>GCC</em></a>. <em>DeskLib</em> is a set of freeware C libraries written by Jason Williams and many others. All C programmers should consider this an essential replacement for <em>RISC_OSLib</em>.</p>
<p><em>Dr Smith's C Development Toolkit</em>, written by Julian Smith and marketed
by WSS, was helpful for debugging in early versions.</p>
<p>The text editor used was <em>Zap</em>, an excellent PD program written by
Dominic Symes with extensions by several other skilled programmers.</p>
<p>The templates were initially created with <em>TemplEd</em>, a PD template
editor and <em>WinEd</em>'s main rival. <em>WinEd</em> is intended to
improve on it in every aspect.</p>
</body>
</html>